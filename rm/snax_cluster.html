
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-8.2.11">
    
    
      
        <title>SNAX Cluster - SNAX Cluster</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c5ef100.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#snitch-acceleration-extension-snax-cluster-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="SNAX Cluster" class="md-header__button md-logo" aria-label="SNAX Cluster" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SNAX Cluster
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SNAX Cluster
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/KULeuven-MICAS/snitch_cluster/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    KULeuven-MICAS/snitch_cluster
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="SNAX Cluster" class="md-nav__button md-logo" aria-label="SNAX Cluster" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SNAX Cluster
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/KULeuven-MICAS/snitch_cluster/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    KULeuven-MICAS/snitch_cluster
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug/getting_started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug/directory_structure.html" class="md-nav__link">
        Repository Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug/tutorial.html" class="md-nav__link">
        Old Tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug/documentation.html" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Hardware
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Hardware" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="snitch.html" class="md-nav__link">
        Snitch
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2" type="checkbox" id="__nav_3_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2">
          Snitch Cluster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Snitch Cluster" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          Snitch Cluster
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="snitch_cluster.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="peripherals.html" class="md-nav__link">
        Peripherals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schema-doc/snitch_cluster.html" class="md-nav__link">
        Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          SNAX Cluster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="snax_cluster.html" class="md-nav__link md-nav__link--active">
        SNAX Cluster
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architectural-modifications" class="md-nav__link">
    Architectural Modifications
  </a>
  
    <nav class="md-nav" aria-label="Architectural Modifications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csr-decoding" class="md-nav__link">
    CSR Decoding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snitch-accelerator-ports" class="md-nav__link">
    Snitch Accelerator Ports
  </a>
  
    <nav class="md-nav" aria-label="Snitch Accelerator Ports">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-channels" class="md-nav__link">
    Request Channels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-channels" class="md-nav__link">
    Response Channels
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csr-instruction-and-accelerator-port-mapping" class="md-nav__link">
    CSR Instruction and Accelerator Port Mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timing-diagram-for-request-and-response" class="md-nav__link">
    Timing Diagram for Request and Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snitch-tcdm-ports" class="md-nav__link">
    Snitch TCDM Ports
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attaching-a-custom-accelerator" class="md-nav__link">
    Attaching a Custom Accelerator
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="reqrsp_interface.html" class="md-nav__link">
        Reqrsp Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="custom_instructions.html" class="md-nav__link">
        Custom Instructions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          SNAX Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SNAX Tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          SNAX Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/introduction.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/architectural_overview.html" class="md-nav__link">
        Architectural Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/accelerator_design.html" class="md-nav__link">
        1. Accelerator Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/csrman_design.html" class="md-nav__link">
        2. CSR Manager Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/streamer_design.html" class="md-nav__link">
        3. Streamer Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/build_system.html" class="md-nav__link">
        4. Building the System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/programming.html" class="md-nav__link">
        5. Programming the System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/other_tools.html" class="md-nav__link">
        Other Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/summary_and_exercise.html" class="md-nav__link">
        Summary and Exercise
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../publications.html" class="md-nav__link">
        Publications
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architectural-modifications" class="md-nav__link">
    Architectural Modifications
  </a>
  
    <nav class="md-nav" aria-label="Architectural Modifications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csr-decoding" class="md-nav__link">
    CSR Decoding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snitch-accelerator-ports" class="md-nav__link">
    Snitch Accelerator Ports
  </a>
  
    <nav class="md-nav" aria-label="Snitch Accelerator Ports">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-channels" class="md-nav__link">
    Request Channels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-channels" class="md-nav__link">
    Response Channels
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csr-instruction-and-accelerator-port-mapping" class="md-nav__link">
    CSR Instruction and Accelerator Port Mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timing-diagram-for-request-and-response" class="md-nav__link">
    Timing Diagram for Request and Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snitch-tcdm-ports" class="md-nav__link">
    Snitch TCDM Ports
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attaching-a-custom-accelerator" class="md-nav__link">
    Attaching a Custom Accelerator
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/KULeuven-MICAS/snitch_cluster/edit/master/docs/rm/snax_cluster.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="snitch-acceleration-extension-snax-cluster-documentation">SNitch Acceleration eXtension (SNAX) Cluster Documentation</h1>
<p>This section discusses the modifications to the Snitch cluster to makthe acceleration extensions as easy as possible. The figure below shows a simplified figure of the SNAX architecture.</p>
<p><img alt="SNAX Cluster" src="https://drive.google.com/uc?id=1PqMhcxbqWnJdn-EawCfGetc0CbqfFCK_" /></p>
<p>The SNAX cluster is a shell that provides the fundamental needs of an accelerator:</p>
<ul>
<li>A manager core (Snitch core) used to control the accelerator.</li>
<li>A memory which accelerators can stream data to and from. The number of TCDM ports connected to the accelerator is parametrizable.</li>
<li>An interconnect shell that can connect to other SNAX or Snitch clusters.</li>
</ul>
<p>These basic components allow users to conveniently create their own heterogenous architecture.</p>
<h2 id="architectural-modifications">Architectural Modifications</h2>
<p>There are three modifications in the SNAX cluster:</p>
<ol>
<li>Adding CSR decoding for the SNAX control.</li>
<li>Attaching the Snitch accelerator ports to control the accelerator.</li>
<li>Adding TCDM ports to the accelerator's memory ports.</li>
</ol>
<p>The figure below shows a zoomed-in visualization highlighting the changes in the original Snitch micro-architecture:</p>
<p><img alt="SNAX modifications" src="https://drive.google.com/uc?id=11dr-GN-QwNBFIywlYFiX9Mdg9COQ_2vU" /></p>
<h3 id="csr-decoding">CSR Decoding</h3>
<p>The <a href="https://drive.google.com/file/d/1s0lZxUZaa7eV_O0_WsZzaurFLLww7ou5/view?usp=drive_link">RISCV ISA</a> has a standard for control and status register (CSR) instructions. Check the section about Zicsr in the specification document. In SNAX, we assume that each custom accelerator has its own CSRs. In the RISCV CSR instructions, we just specify the target CSR address and the value we want to write unto that address. Using CSRs is a more general and configurable approach as opposed to writing custom instructions. Note that these instructions treat the CSRs via register-mapped IOs. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using custom instructions allows users to create a co-processor because the control is tightly embedded in the Snitch decoder. It is possible to pack more information in the custom instructions. However, this requires each Snitch core's decoder to have that custom instruction even when a different accelerator is attached. Moreover, RISCV compilers need to always update to include these instructions. The CSR approach only requires us to provide the CSR addresses since RISCV ISA has a standard for CSR instructions.</p>
</div>
<p>The RISCV CSR instruction has a 12-bit CSR address. There are other existing CSRs in Snitch, but we reserved CSR addresses <code>[0x3c0:0x5ff]</code> giving us a total of 575 different registers to use. Note that the Snitch does not instantiate any registers. Rather it offloads the CSR reads and writes unto the accelerator's.</p>
<p>For example the table below describes the the <a href="https://github.com/KULeuven-MICAS/hwpe-mac-engine">HWPE MAC engine</a> CSRs. First, we consider the <code>CSR Address Offset</code> which we add to any reserved register space. For example, if we allocate <code>[0x3c0:0x3d7]</code> space for the entire register mapping of the HWPE, then we have the equivalent <code>CSR Address</code> listed in the third column. Any user has the freedom to set these mappings as long as it is consistent with the register spacing they need.</p>
<table>
<thead>
<tr>
<th>Register</th>
<th>CSR Address Offset</th>
<th>CSR Address if <br /> Starting from <code>0x3c0</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trigger</td>
<td>0</td>
<td>0x3c0</td>
<td>Write 0 to start</td>
</tr>
<tr>
<td>Acquire</td>
<td>1</td>
<td>0x3c1</td>
<td>Lock the accelerator</td>
</tr>
<tr>
<td>Finsihed</td>
<td>2</td>
<td>0x3c2</td>
<td>Finished signal (1 pulse only)</td>
</tr>
<tr>
<td>Status</td>
<td>3</td>
<td>0x3c3</td>
<td>1: busy; 0: free</td>
</tr>
<tr>
<td>Running</td>
<td>4</td>
<td>0x3c4</td>
<td>1: running; 0: free</td>
</tr>
<tr>
<td>Softclear</td>
<td>5</td>
<td>0x3c5</td>
<td>write 1 to reset the accelerator</td>
</tr>
<tr>
<td>Reserved</td>
<td>6</td>
<td>0x3c6</td>
<td>Reserved</td>
</tr>
<tr>
<td>SWEVT</td>
<td>7</td>
<td>0x3c7</td>
<td>Events</td>
</tr>
<tr>
<td>Generic</td>
<td>8-15</td>
<td>0x3c8 - 0x3cf</td>
<td>General purpose registers (RW access)</td>
</tr>
<tr>
<td>Address A</td>
<td>16</td>
<td>0x3d0</td>
<td>Starting address for input A</td>
</tr>
<tr>
<td>Address B</td>
<td>17</td>
<td>0x3d1</td>
<td>Starting address for input B</td>
</tr>
<tr>
<td>Address C</td>
<td>18</td>
<td>0x3d2</td>
<td>Starting address for input C</td>
</tr>
<tr>
<td>Address D</td>
<td>19</td>
<td>0x3d3</td>
<td>Starting address for output D</td>
</tr>
<tr>
<td>Iterations</td>
<td>20</td>
<td>0x3d4</td>
<td>Number of iterations</td>
</tr>
<tr>
<td>Vector Length</td>
<td>21</td>
<td>0x3d5</td>
<td>Number of elements</td>
</tr>
<tr>
<td>Multiplier Mode</td>
<td>22</td>
<td>0x3d6</td>
<td>1: $d_i = a_i \cdot b_i$;  <br /> 0: $D = ( \sum a_i \cdot b_i) + C$</td>
</tr>
<tr>
<td>Vector Stide</td>
<td>23</td>
<td>0x3d7</td>
<td>Vectore tride</td>
</tr>
</tbody>
</table>
<p>There are no registers in the unused addresses <code>[0x3d8:0x5ff]</code>. However, a user can utilize the unused addresses for their needs.</p>
<h3 id="snitch-accelerator-ports">Snitch Accelerator Ports</h3>
<p>The Snitch has accelerator ports that connect to the co-processors or accelerator units like the floating point sub-system (FPSS), integer processing units (IPU), stream semantic registers (SSRs), and also the DMA. The SNAX version also uses the same ports to control any custom accelerator. The figure below shows the the Snitch / SNAX ports for controlling an acccelerator:</p>
<p><img alt="Accelerator Request Response Ports" src="https://drive.google.com/uc?id=18QRV3U6FrEvX3-0q908MgRKv-pq02eKq" /></p>
<p>There are two channels, the request and response channels. The request channels are used for sending data and control from the Snitch core to the accelerator. The response channel is the return channel if the request command requires data to be sent back to the Snitch core. The tables below describe the request and response channels.</p>
<h4 id="request-channels">Request Channels</h4>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>addr</td>
<td>Accelerator address. SNAX ports is 5.</td>
</tr>
<tr>
<td>id</td>
<td>Transaction ID that is equal to the destination register specified in the custom or CSR instruction.</td>
</tr>
<tr>
<td>data_op</td>
<td>The RISCV instruction that was executed.</td>
</tr>
<tr>
<td>data_arga</td>
<td>The rs1 field of the custom or CSR RISCV instruction executed.</td>
</tr>
<tr>
<td>data_argb</td>
<td>The rs2 field of the custom or CSR RISCV instruction executed.</td>
</tr>
<tr>
<td>data_argc</td>
<td>The rs3 field of the custom RISCV instruction executed. <br />  Snitch SSR instructions have an rs3 field.</td>
</tr>
<tr>
<td>snax_qvalid</td>
<td>Request valid signal.</td>
</tr>
<tr>
<td>snax_qready</td>
<td>Request ready signal.</td>
</tr>
</tbody>
</table>
<h4 id="response-channels">Response Channels</h4>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Transaction ID that is equal to the destination register specified in the requested custom or CSR instruction.</td>
</tr>
<tr>
<td>error</td>
<td>Error signal.</td>
</tr>
<tr>
<td>data</td>
<td>The return value of the requested transaction.</td>
</tr>
<tr>
<td>snax_pvalid</td>
<td>Response valid signal.</td>
</tr>
<tr>
<td>snax_pready</td>
<td>Response ready signal.</td>
</tr>
</tbody>
</table>
<h3 id="csr-instruction-and-accelerator-port-mapping">CSR Instruction and Accelerator Port Mapping</h3>
<p>It is important to know how to map the CSR instruction into the request and response channel ports. For example, consider the <code>csrrw</code> instruction:</p>
<div class="highlight"><pre><span></span><code><span class="nf">csrrw</span><span class="w"> </span><span class="no">rd</span><span class="p">,</span><span class="w"> </span><span class="no">csr_addr</span><span class="p">,</span><span class="w"> </span><span class="no">rs1</span><span class="w"></span>
</code></pre></div>
<p>Where <code>csrrw</code> is a CSR read-write instruction which reads the current data located at <code>csr_addr</code> and stores it in <code>rd</code> and writes the data <code>rs1</code> at <code>csr_addr</code> simultanesouly. The <code>csr_addr</code> is a 12-bit unsigned value (e.g., <code>0x3c0</code>). This instruction maps to the request channel as:</p>
<ul>
<li><code>addr</code> - will point to the accelerator port (e.g., 0 is for the FPSS, 1 is for the shared multiply and divide, and 5 is for SNAX ports. Always use 5 if you want to use the SNAX accelerator ports.).</li>
<li><code>id</code> - will be the register number <code>rd</code> (not the contents of <code>rd</code>).</li>
<li><code>data_op</code> - is the machine code for the CSR instruction (e.g., the machine code equivalent of <code>csrrw rd, csr_addr, rs1</code>).</li>
<li><code>data_arga</code> - will contain <code>csr_addr</code>.</li>
<li><code>data_argb</code> - will contain the contents of <code>rs1</code>.</li>
<li><code>data_argc</code> - not used for SNAX but used in SSR.</li>
</ul>
<p>Then for the response ports we have:</p>
<ul>
<li><code>id</code> - this indicates which destination register should the <code>data</code> be stored. This is equivalent to the requested <code>rd</code>.</li>
<li><code>error</code> - this is custom to the accelerator.</li>
<li><code>data</code> - the data returned by the request.</li>
</ul>
<h3 id="timing-diagram-for-request-and-response">Timing Diagram for Request and Response</h3>
<p>The section <a href="reqrsp_interface.html">Request and Response</a> discusses the valid-ready handshake. It is used for the request and response channels. Below are some sample timing diagrams for the request and response ports.</p>
<p><img alt="SNAX accelerator ports" src="https://drive.google.com/uc?id=1ORWy6HhMxf3Q21EetJjOpklhCiqumZyX" /></p>
<p>In the figure above, observe the following:</p>
<ul>
<li>The transaction only progresses when <code>valid</code> and <code>ready</code> signals for each <code>request</code> and <code>response</code> ports are both high. The transaction progresses, otherwise, cycles are stalled.</li>
<li>In the request channel:<ul>
<li><code>addr</code> has 5 set to it because it goes into the SNAX accelerator ports. This is fixed.</li>
<li><code>id</code> pertains to the destination register <code>r3</code>.</li>
<li><code>data_arga</code> is the CSR address <code>0x3c0</code></li>
<li><code>data_argb</code> contains the contents inside register <code>r1</code></li>
<li><code>data_argc</code> is unused for SNAX.</li>
</ul>
</li>
<li>In the response channel:<ul>
<li><code>id</code> returned comes from the original request which was <code>r3</code>.</li>
<li><code>error</code> is 0 but can be any number depending on response.</li>
<li><code>data</code> is whatever the accelerator returns back. It's possible that write only requests don't need to return anything back.</li>
</ul>
</li>
</ul>
<h3 id="snitch-tcdm-ports">Snitch TCDM Ports</h3>
<p>The Snitch TCDM ports function similarly like the accelerator request-response ports. The figure below shows the TCDM connection:</p>
<p><img alt="SNAX TCDM ports" src="https://drive.google.com/uc?id=1GWrK3lolX0v89iy3oNbgR8guhpaXnRFa" /></p>
<p>It also uses the same valid-ready handshake similar to the accelerator ports. The signal definitions for the request port are:</p>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>q_valid</td>
<td>Request side valid signal.</td>
</tr>
<tr>
<td>write</td>
<td>Write signal. 1 means to write.</td>
</tr>
<tr>
<td>addr</td>
<td>Memory address to write to.</td>
</tr>
<tr>
<td>amo</td>
<td>Atomic memory operation. Details are in <a href="reqrsp_interface.html">Request and Response</a> section</td>
</tr>
<tr>
<td>data</td>
<td>The data to be written.</td>
</tr>
<tr>
<td>user</td>
<td>User field pertains to which core is accessing the port.</td>
</tr>
<tr>
<td>strb</td>
<td>Byte masking for data writes</td>
</tr>
</tbody>
</table>
<p>The signal definitions for the response port are:</p>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>p_valid</td>
<td>Response side valid signal.</td>
</tr>
<tr>
<td>q_ready</td>
<td>Request side ready signal.</td>
</tr>
<tr>
<td>data</td>
<td>The read data to be returned to the core.</td>
</tr>
</tbody>
</table>
<p>Notice that the <code>q_ready</code> signal of the TCDM was placed in the response ports. This is just to indicate that the direction is from the TCDM interconnect towards the Snitch core. Also, there is no <code>p_ready</code> signal indicating that the <code>p_ready</code> is invisibly always ready. The accelerator needs to buffer this data as soon as they can. Note that the <code>p_valid</code> signal asserts immediately along with the appropriate data at that cycle.</p>
<h2 id="attaching-a-custom-accelerator">Attaching a Custom Accelerator</h2>
<p>To attach an accelerator to the SNAX cluster, you only need:</p>
<ol>
<li>To attach the accelerator's ports to the SNAX ports for control.</li>
<li>Attach the accelerator's memory ports to the TCDM ports.</li>
</ol>
<p>You can find the examples inside the <code>/hw/snitch_cluster/src/snitch_cluster.sv</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">snax_mac</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">DataWidth</span><span class="w">          </span><span class="p">(</span><span class="w"> </span><span class="mi">32</span><span class="w">                    </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">SnaxTcdmPorts</span><span class="w">      </span><span class="p">(</span><span class="w"> </span><span class="n">LocalSnaxTcdmPorts</span><span class="w">    </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">acc_req_t</span><span class="w">          </span><span class="p">(</span><span class="w"> </span><span class="n">acc_req_t</span><span class="w">             </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">acc_rsp_t</span><span class="w">          </span><span class="p">(</span><span class="w"> </span><span class="n">acc_resp_t</span><span class="w">            </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">tcdm_req_t</span><span class="w">         </span><span class="p">(</span><span class="w"> </span><span class="n">tcdm_req_t</span><span class="w">            </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">tcdm_rsp_t</span><span class="w">         </span><span class="p">(</span><span class="w"> </span><span class="n">tcdm_rsp_t</span><span class="w">            </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">i_snax_mac</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">clk_i</span><span class="w">              </span><span class="p">(</span><span class="w"> </span><span class="n">clk_i</span><span class="w">                 </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">rst_ni</span><span class="w">             </span><span class="p">(</span><span class="w"> </span><span class="n">rst_ni</span><span class="w">                </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_req_i</span><span class="w">         </span><span class="p">(</span><span class="w"> </span><span class="n">snax_req</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">           </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_qvalid_i</span><span class="w">      </span><span class="p">(</span><span class="w"> </span><span class="n">snax_qvalid</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">        </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_qready_o</span><span class="w">      </span><span class="p">(</span><span class="w"> </span><span class="n">snax_qready</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">        </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_resp_o</span><span class="w">        </span><span class="p">(</span><span class="w"> </span><span class="n">snax_resp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">          </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_pvalid_o</span><span class="w">      </span><span class="p">(</span><span class="w"> </span><span class="n">snax_pvalid</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">        </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_pready_i</span><span class="w">      </span><span class="p">(</span><span class="w"> </span><span class="n">snax_pready</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w">        </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_tcdm_req_o</span><span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="n">hang_snax_tcdm_req</span><span class="w">    </span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">snax_tcdm_rsp_i</span><span class="w">    </span><span class="p">(</span><span class="w"> </span><span class="n">hang_snax_tcdm_rsp</span><span class="w">    </span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>The <code>snax_mac</code> is the top-level wrapper of the entire HWPE MAC engine. Observe that the main ports are just the accelerator ports and the TCDM ports. Moreover there is a <code>SnaxTcdmPorts</code> parameter at the top of the <code>snitch_cluster.sv</code>. This indicates the number of TCDM ports connected to the accelerator. You can also configure these in the configuration <code>.hjson</code> files found in <code>/target/snitch_cluster/cfg/</code>. Checkout the <code>snax-mac.hjson</code> as an example where it indicates the <code>SnaxTcdmPorts</code> size and the accelerator.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../schema-doc/snitch_cluster.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Schema" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Schema
            </div>
          </div>
        </a>
      
      
        
        <a href="reqrsp_interface.html" class="md-footer__link md-footer__link--next" aria-label="Next: Reqrsp Interface" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Reqrsp Interface
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.748e2769.min.js"></script>
      
    
  </body>
</html>